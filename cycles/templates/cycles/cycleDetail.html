{% extends "cycles/index.html" %}

{% block content %}

{% if cycle.inactive == 0 %}
<a href="{% url 'cycles:cycleLock' cycle.id %}"><button class="btn btn-danger btn-sm">Lock Billing Cycle</button></a>
{% endif %}

{% if cycle.inactive == 1 %}
<a href="{% url 'cycles:cycleLock' cycle.id %}"><button class="btn btn-primary btn-sm">Unlock Billing Cycle</button></a>
{% endif %}

{% if cycle.split == 0 %}
<a href="{% url 'cycles:percentSplit' cycle.id %}"><button class="btn btn-danger btn-sm">Split Bills by Income %</button></a>
{% endif %}

{% if cycle.split == 1 %}
<a href="{% url 'cycles:percentSplit' cycle.id %}"><button class="btn btn-primary btn-sm">Split Bills Evenly</button></a>
{% endif %}

<br>
<br>

<p>Cycle: {{ cycle.name }} End Date: {{ cycle.endDate }} </p>

{% if cycle.split == 0 %}
{% for tenant in currentTenants %}
<p>{{ tenant.name }} owes ${{ duePerTenant|floatformat:2 }}</p>
{% endfor %}
{% endif %}

{% if cycle.split == 1 %}
{% for tenant, due in percentAmtDue.items %}
<p>{{ tenant }} owes ${{ due|floatformat:2 }}</p>
{% endfor %}
{% endif %}

<br>
{% if cycle.inactive == 0 %}
<p>Recurring Bills</p>
{% for bill in recurringBills%}

<p>{{ bill.name }} ${{ bill.amount }} <a href="{% url 'cycles:editBillForm' bill.id %}"><button
            class="btn btn-primary btn-sm">Edit</button></a></p>

{% endfor %}

Total due for Recurring Bills: ${{ recurringBillsDue.amount__sum|floatformat:2 }}
<br>
<a href="{% url 'cycles:addRecurringFormDetail' cycle.id %}"><button class="btn btn-primary btn-sm">Add Recurring
        Bill</button></a>
<br>
<br>
<br>
<p>One-Time Bills</p>
{% for bill in oneTimeBills%}
<p>{{ bill.name }} ${{ bill.amount }} <a href="{% url 'cycles:editBillForm' bill.id %}"><button
            class="btn btn-primary btn-sm">Edit</button></a>
    <a href="{% url 'cycles:deleteBill' bill.id %}"><button class="btn btn-danger btn-sm">Delete</button></a></p>
{% endfor %}

Total due for One-Time Bills: ${{ oneTimeBillsDue.amount__sum|floatformat:2 }}
<br>
<a href="{% url 'cycles:addOneTimeForm' cycle.id %}"><button class="btn btn-primary btn-sm">Add One-Time
        Bill</button></a>
<br>
Total due for billing cycle: ${{ allBillsDue.amount__sum|floatformat:2 }}
{% endif %}


{% if cycle.inactive == 1 %}
<p>Recurring Bills</p>
{% for bill in recurringBills%}

<p>{{ bill.name }} ${{ bill.amount }} </p>

{% endfor %}

Total due for Recurring Bills: ${{ recurringBillsDue.amount__sum|floatformat:2 }}
<br>
<br>
<br>
<br>
<p>One-Time Bills</p>
{% for bill in oneTimeBills%}
<p>{{ bill.name }} ${{ bill.amount }} </p>
{% endfor %}

Total due for One-Time Bills: ${{ oneTimeBillsDue.amount__sum|floatformat:2 }}
<br>
<br>
Total due for billing cycle: ${{ allBillsDue.amount__sum|floatformat:2 }}
{% endif %}

{% endblock %}